---
title: Monitoring Proxy Metrics (Galera)
owner: MySQL
---

<strong><%= modified_date %></strong>

This topic describes how to obtain health and metrics for each proxy instance in a Galera cluster.

The service provides a dashboard where administrators can observe health and
metrics for each proxy instance. Metrics include the number of client connections
routed to each backend database cluster node.

WHAT is a PROXY INSTANCE? 

## <a id="prereq"></a>Prerequisite ##

You need the basic auth credentials for MySQL for PCF to view the dashboards.

To obtain the admin? basic auth? redentials, do the following:

1. From the **MySQL for PCF** tile, click the **Credentials** tab.
1. Locate the **Mysql Admin Password** entry in the **MySQL Server** section and click **Link to Credential**.
1. Record the values for `identity` and `password`.

2. WE NEED TO SEE THIS.  


## <a id="proxy-dashboard"></a>Proxy Dashboard ##

The service provides a dashboard where administrators can observe health and
metrics for each proxy instance. Metrics include the number of client connections
routed to each backend database cluster node.

To monitor health and metrics using the Proxy Dashboard (aka Switchboard?),
do the following:

1. To view a list of proxy instances, navigate to the dashboard the following URL:

`https://proxy-p-mysql.SYSTEM-DOMAIN`

Where:

`SYSTEM-DOMAIN` is 

[SCREENSHOT]

2. Enter CREDENTIALS? 

2. Click the link for the proxy instance that you want to monitor.


You can also find links to the proxies at `https://proxy-p-mysql.SYSTEM-DOMAIN`.
The job index starts at `0`.
For example, if you have two proxy instances deployed and your system domain is
`example.com`,
you would access your proxy instance dashboards would at:

- `https://0-proxy-p-mysql.example.com`
- `https://1-proxy-p-mysql.example.com`

<p class="note"><strong>Note</strong>: Earlier versions of MySQL for PCF use a
  different hostname format for the proxies, in the
  form: <code>http://proxy-JOB-INDEX-p-mysql.SYSTEM-DOMAIN</code><br>
  For example: <code>https://proxy-0-p-mysql.example.com</code></p>

You need basic auth credentials to access these dashboards. You can find them
in the **Credentials** tab of the **MySQL for PCF** tile in Ops Manager.

## <a id="proxy-api"></a> API ##

The proxy hosts a JSON API at `JOB-INDEX-proxy-p-mysql.SYSTEM-DOMAIN/v0/`.

The API provides the following route:

Request:

*  Method: GET
*  Path: `/v0/backends`
*  Params: ~
*  Headers: Basic Auth

Response:

```
[
  {
    "name": "mysql-0",
    "ip": "1.2.3.4",
    "healthy": true,
    "active": true,
    "currentSessionCount": 2
  },
  {
    "name": "mysql-1",
    "ip": "5.6.7.8",
    "healthy": false,
    "active": false,
    "currentSessionCount": 0
  },
  {
    "name": "mysql-2",
    "ip": "9.9.9.9",
    "healthy": true,
    "active": false,
    "currentSessionCount": 0
  }
]
```
