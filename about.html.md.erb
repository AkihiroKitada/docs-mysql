---
title: On-Demand Networking
owner: MySQL
---

<strong><%= modified_date %></strong>

This topic describes networking for on-demand services, including MySQL for Pivotal Cloud Foundry (PCF).

## <a id="service-network"></a>Service Network Requirement

<%= partial '../../mysql/odb/service-networks-v3' %>


## <a id='on-demand'></a>Default Network and Service Network

<%= partial '../../mysql/odb/on_demand_architecture' %>

## <a id="rules"></a> Required Networking Rules for On-Demand Services

<%= partial '../../mysql/odb/service_networks_table' %>

## <a id='mysql-ports'></a> Required Networking Rules for MySQL for PCF

Regardless of the specific network layout, the operator must ensure network rules are set up so that connections are open as described in the table below. 

<table class="nice">
	<th>This component...</th>
	<th>Must communicate with...</th>
	<th>Default TCP Port</th>
	<th>Communication direction(s)</th>
	<th>Notes</th>
	<tr>
		<td><strong>BOSH Agent</strong></td>
		<td><strong>BOSH Director</strong></td>
		<td>4222</td>
		<td>Two-way</td>
		<td>The BOSH Agent runs on every VM in the system, including the BOSH Director VM.
                    The BOSH Agent initiates the connection with the BOSH Director.<br>
		    The default port is not configurable.  </td>
	</tr>
	<tr>
		<td><strong>Broker and service instances</strong></td>
		<td><strong>the Doppler on PAS or Elastic Runtime</strong></td>
		<td>8082</td>
		<td>One-way</td>
		<td>This port is for metrics.</td>
	</tr>
	<tr>
		<td><strong>Deployed apps on PAS or Elastic Runtime</strong></td>
		<td><strong>MySQL service instances</strong></td>
		<td>3306</td>
		<td>One-way</td>
		<td>This port is for general use, app-specific tasks.
                    In addition to configuring your IaaS, create a security group
                    for the MySQL service instance.</td>
	</tr>
	<tr>
		<td><strong>ODB</strong></td>
		<td>
		    
		        <strong>BOSH Director</strong>
                        <br>
		  	<strong>BOSH UAA</strong>
		   
		</td>
		<td>
			
				25555<br>
				8443
			
		</td>
		<td>One-way</td>
		<td>The default ports are not configurable.</td>
	</tr>
	<tr>
		<td><strong>ODB</strong></td>
		<td><strong>MySQL service instances</strong>
		</td>
		<td>	
				8443<br>3306
		</td>
		<td>One-way</td>
		<td>This connection is for administrative tasks. Avoid opening general use, app-specific ports for this connection.</td>
	</tr>
	<tr>
		<td><strong>ODB</strong></td>
		<td><strong>PAS or Elastic Runtime</strong>
		</td>
		<td>8443</td>
		<td>One-way</td>
		<td>The default port is not configurable.</td>
	</tr>
	<tr>
		<td><strong>PAS or Elastic Runtime</strong></td>
		<td><strong>ODB</strong>
		</td>
		<td>8080</td>
		<td>One-way</td>
		<td>This port allows PAS or Elastic Runtime to communicate with the ODB component.</td>
	</tr>
	<tr>
		<td><strong>Deployed apps on PAS</strong></td>
		<td><strong>Runtime CredHub</strong>
		</td>
		<td>8844</td>
		<td>One-way</td>
		<td>This port is needed if secure service instance credentials are enabled.
                    For information, see <a href="install-config.html#security">Configure Security</a>.</td>
	</tr>
</table>

### <a id='lf-ports'></a> Required Networking Rules for Leader-Follower Plans
	
In addition to the networking rules required for MySQL for PCF, if you are using a leader-follower
service plan, the operator must ensure network rules are set up so that connections are open as described in the table below.
	
<table class="nice">
	<th>This component...</th>
	<th>Must communicate with...</th>
	<th>Default TCP Port</th>
	<th>Communication direction(s)</th>
	<th>Notes</th>
	<tr>
		<td><strong>Leader VM</strong></td>
		<td><strong>Follower VM</strong></td>
		<td>8443<br>8081</td>
		<td>Two-way</td>
		<td>This port is needed if leader-follower is enabled.
                    For information, see <a href="maintain-leader-follower.html#config-plan">Configure a Leader-Follower Service Plan</a>.</td>
	</tr>
</table>

### <a id='hac-ports'></a> Required Networking Rules for Highly Available Cluster Plans

In addition to the networking rules required for MySQL for PCF, if you are using a highly available 
cluster service plan, the operator must ensure network rules are set up so that connections are open as described in the table below.

<%= partial "./galera_beta" %>

<table class="nice">
	<th>This component...</th>
	<th>Must communicate with...</th>
	<th>Default TCP Port</th>
	<th>Communication direction(s)</th>
	<th>Notes</th>
		
	<tr>
		<td><strong>PAS or Elastic Runtime</strong></td>
		<td>MySQL service instances</td>
		<td>8083</td>
		<td>One-way</td>
		<td>This port is needed to monitor cluster health with Switchboard. 
			For more information, see <a href="./monitor-health.html">Monitoring Node Health</a></td>
	</tr>
	
	<tr>
		<td><strong>mysql-diag</strong></td>
		<td>MySQL service instances</td>
		<td>8112</td>
		<td>One-way</td>
		<td>This port is needed to for troubleshooting cluster nodes with <code>mysql-diag</code>.</td>
	</tr>
	
	<tr>
		<td><strong>Galera</strong></td>
		<td><strong>Galera</strong></td>
		<td> 4567 <br> 4568 <br> 4444 </td>
		<td>Two-way</td>
		<td>This port is needed to maintain network connectivity between nodes in a Galera Cluster. For more infomation, see <a href="http://galeracluster.com/documentation-webpages/firewallsettings.html">Firewall Settings</a> in the Galera documentation.</td>
	</tr>
	<tr>
		<td><strong>Galera healthcheck</strong></td>
		<td><strong>Galera healthcheck</strong></td>
		<td>9200</td>
		<td>Two-way</td>
		<td>This port is for monitoring the health of nodes in a Galera Cluster.</td>
	</tr>
</table>
	
