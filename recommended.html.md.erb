---
title: MySQL for PCF Recommended Usage and Limitations
owner: MySQL
---

<strong><%= modified_date %></strong>

## <a id="usecases"></a> Recommended Use Cases

MySQL is a powerful open-source relational database used by apps since the mid-90s. Developers have relied on MySQL as a first step to storing, processing and sharing data. As its user community has grown, MySQL has become a robust system capable of handling a wide variety of use cases and very significant workloads. Unlike other traditional databases which centralize and consolidate data, MySQL lends itself to dedicated deployment supporting the “shared nothing” context of building apps in the cloud.

##<a id="ondemand"></a> About On-Demand Plans
* Each on-demand plan instance is deployed to its own VM and is suitable for production workloads.
* The maximum-number of on-demand plan instances available to developers is set by the operator and enforced on both a global and per-plan level quota.
  The global quota cannot exceed 200.
* Operators can update the plan settings, including the VM size and disk size after the plans have been created. **Operators should not downsize the VMs or disk size as this can cause data loss in pre-existing instances.**
* All plans deploy a single VM of the specified size with the specified disk type.
* Cannot scale down the size of VMs on the plan once deployed (this protects against data loss).
* The default maximum number of connections is set at 750.

## <a id="resources"></a> Resource Usage Planning for On-Demand Plans

For information on setting limits and calculating costs for on-demand service instances, see [Setting Limits for On-Demand Service Instances](./set-quotas.html).

##<a id="azs"></a> Availability Using Multiple AZs

MySQL for PCF supports configuring multiple availability zones. At a minimum, Pivotal recommends using two availability
zones, one for the broker and one for the MySQL VMs. If you plan to configure leader-follower, Pivotal recommends three availability zones as described in the
[About Leader-Follower](./about-leader-follower.html) page. If you plan to configure highly available clusters, Pivotal recommends three availability zones as described in the
[About Highly Available Clusters](./about-ha.html) page.

##<a id="downtime"></a> Downtime During Redeploys

Redeploying MySQL for PCF for configuration changes or upgrades will result in MySQL being inaccessible to apps for a brief period of time.

##<a id="persistent"></a> Persistent Disk Usage

The persistent disk receives and temporarily stores and encrypts MySQL backups.
This results in increased disk usage while backups are being processed.
For single-node and leader-follower service plans, backups are processed on the MySQL VM.
For highly available (HA) clusters, backups are processed on the jumpbox VM.

In addition to backups, the persistent disk also stores InnoDB redo logs. These logs use
a static amount of disk size. On single node and leader-follower persistent disks,
the logs use 512 MB of space. On HA cluster persistent disks, the logs use 2 GB of space.

When enabling backups for single node and leader-follower service plans, use the
following formula to choose MySQL persistent disk sizes:

```
3 * (maximum amount of app data) + 512 MB
```

When enabling backups for HA cluster service plans, use the following formula to
choose jumpbox persistent disk sizes:

```
2 * (maximum amount of app data) + 2 GB
```

Use the following formula to choose HA cluster node persistent disk sizes:

```
(maximum amount of app data) + 2 GB
```

The following diagram shows how persistent disk space is used in the single-node and leader-follower topologies
and in the HA cluster topology.

<!-- Edit the below diagram here: https://docs.google.com/presentation/d/1G-4BYAt0TI7XIXlS8ahHWzgnAZX6-8Ux9B9y73JV9u4/edit?usp=sharing -->

<a href="./images/disk-lf-ha.png" target="_blank">
  <img alt="Persistent Disk diagram" src="./images/disk-lf-ha.png"/>
</a>
